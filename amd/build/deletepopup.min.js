define("local_tickets/deletepopup",["exports","core/ajax","core/notification","core/toast","core/str"],(function(_exports,_ajax,_notification,_toast,_str){var e;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=(e=_notification)&&e.__esModule?e:{default:e};const addNotification=(msg,type)=>{(0,_toast.add)(msg,{type:type})};_exports.init=()=>{Array.from(document.getElementsByClassName("delete-ticket")).forEach((element=>{element.addEventListener("click",(e=>{e.preventDefault();const ticketId=element.dataset.ticketId;_notification.default.confirm((0,_str.get_string)("confirm"),(0,_str.get_string)("confirm_ticket_delete","local_tickets"),(0,_str.get_string)("yes"),(0,_str.get_string)("no"),(()=>{e.preventDefault(),(0,_ajax.call)([{methodname:"local_tickets_delete_ticket",args:{id:ticketId},done:function(response){console.log(ticketId),console.log(response),200==response.status?location.reload():addNotification(response.message,"danger")},fail:function(ex){addNotification(`Failed to delete ticket: ${ex}`,"danger"),console.log(ex)}}])}))}))}))}}));

//# sourceMappingURL=deletepopup.min.js.map