define("local_tickets/modalforms",["exports","core_form/modalform","core/toast","core/ajax"],(function(_exports,_modalform,_toast,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.modalForm=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};const addNotification=(msg,type)=>{(0,_toast.add)(msg,{type:type}),console.log(msg)};_exports.modalForm=function(linkSelector,formClass,methodName,title){let args=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{hidebuttons:1,...args};document.querySelector(linkSelector).addEventListener("click",(e=>{e.preventDefault();const form=new _modalform.default({formClass:formClass,args:args,modalConfig:{title:title},returnFocus:e.currentTarget});form.addEventListener(form.events.FORM_SUBMITTED,(e=>{const formData=JSON.stringify(e.detail);(0,_ajax.call)([{methodname:methodName,args:{data:formData},done:function(response){const type=200===response?.status?"success":"danger";addNotification(response.message,type)},fail:function(ex){console.log(ex),addNotification(`Failed to submit the form: ${ex.message}`,"danger")}}])})),form.addEventListener(form.events.ERROR,(e=>addNotification("Oopsie - "+e.detail.message))),form.show()}))}}));

//# sourceMappingURL=modalforms.min.js.map