define("local_tickets/modalforms",["exports","core_form/modalform","core/toast","core/str"],(function(_exports,_modalform,_toast,_str){var e;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.modalForm=_exports.changeStatusModalForms=void 0,_modalform=(e=_modalform)&&e.__esModule?e:{default:e};const addNotification=(msg,type)=>{(0,_toast.add)(msg,{type:type})};_exports.modalForm=function(linkSelector,formClass,title){let args=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{...args,hidebuttons:args.hidebuttons??1};document.querySelector(linkSelector).addEventListener("click",(e=>{e.preventDefault();const form=new _modalform.default({formClass:formClass,args:args,modalConfig:{title:title},returnFocus:e.currentTarget});form.addEventListener(form.events.FORM_SUBMITTED,(e=>{const response=e.detail,type=200==response.status?"success":"danger";addNotification(response.message,type)})),form.addEventListener(form.events.ERROR,(e=>addNotification("Oopsie - "+e.detail.message))),form.show()}))};_exports.changeStatusModalForms=function(linkSelector,formClass){let args=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{...args,hidebuttons:args.hidebuttons??1};document.querySelectorAll(linkSelector).forEach((element=>{element.addEventListener("click",(e=>{e.preventDefault();const ticketId=element.dataset.ticketId,form=new _modalform.default({formClass:formClass,args:{...args,id:ticketId},modalConfig:{title:(0,_str.get_string)("edit_status","local_tickets")},returnFocus:e.currentTarget});form.addEventListener(form.events.FORM_SUBMITTED,(e=>{const response=e.detail;let type;200==response.status?(type="success",location.reload()):type="danger",addNotification(response.message,type)})),form.addEventListener(form.events.ERROR,(e=>{addNotification("Oopsie - "+e.detail.message)})),form.show()}))}))}}));

//# sourceMappingURL=modalforms.min.js.map