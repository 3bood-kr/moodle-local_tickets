{"version":3,"file":"deletepopup.min.js","sources":["../src/deletepopup.js"],"sourcesContent":["import {call as ajaxCall} from 'core/ajax';\r\nimport Notification from 'core/notification';\r\nimport {add as addToast} from 'core/toast';\r\nimport {get_string as getString} from 'core/str';\r\n\r\nconst addNotification = (msg, type) => {\r\n    addToast(msg, {type: type});\r\n};\r\n\r\nexport const init = () => {\r\n    Array.from(document.getElementsByClassName('delete-ticket')).forEach(element => {\r\n        element.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            const ticketId = element.dataset.ticketId;\r\n            Notification.confirm(\r\n                getString('confirm'),\r\n                getString('confirm_ticket_delete', 'local_tickets'),\r\n                getString('yes'), // Delete.\r\n                getString('no'), // Cancel.\r\n                () => {\r\n                    e.preventDefault();\r\n                    ajaxCall([{\r\n                        methodname: 'local_tickets_delete_ticket', \r\n                        args: {id: ticketId},\r\n                        done: function(response) {\r\n                            console.log(ticketId);\r\n                            console.log(response);\r\n                            if(response.status == 200){\r\n                                location.reload();\r\n                            }\r\n                            else{\r\n                                addNotification(response.message, 'danger');\r\n                            }\r\n                        },\r\n                        fail: function(ex) {\r\n                            addNotification(`Failed to delete ticket: ${ex}`, 'danger');\r\n                            console.log(ex);\r\n                        }\r\n                    }])\r\n                },\r\n            );  \r\n        });\r\n    });\r\n}\r\n"],"names":["e","_notification","__esModule","default","addNotification","msg","type","addToast","_exports","init","Array","from","document","getElementsByClassName","forEach","element","addEventListener","preventDefault","ticketId","dataset","Notification","confirm","getString","get_string","ajaxCall","methodname","args","id","done","response","console","log","status","location","reload","message","fail","ex"],"mappings":"2JAC6C,IAAAA,+EAA7CC,eAA6CD,EAA7CC,gBAA6CD,EAAAE,WAAAF,EAAAG,CAAAA,QAAAH,GAI7C,MAAMI,gBAAkBA,CAACC,IAAKC,SAC1B,EAAAC,OAAAA,KAASF,IAAK,CAACC,KAAMA,MAAM,EAqC9BE,SAAAC,KAlCmBA,KAChBC,MAAMC,KAAKC,SAASC,uBAAuB,kBAAkBC,SAAQC,UACjEA,QAAQC,iBAAiB,SAAShB,IAC9BA,EAAEiB,iBACF,MAAMC,SAAWH,QAAQI,QAAQD,SACjCE,cAAAA,QAAaC,SACT,EAAAC,KAASC,YAAC,YACV,EAAAD,KAASC,YAAC,wBAAyB,kBACnC,EAAAD,KAASC,YAAC,QACV,EAAAD,KAASC,YAAC,OACV,KACIvB,EAAEiB,kBACF,EAAAO,MAAAA,MAAS,CAAC,CACNC,WAAY,8BACZC,KAAM,CAACC,GAAIT,UACXU,KAAM,SAASC,UACXC,QAAQC,IAAIb,UACZY,QAAQC,IAAIF,UACU,KAAnBA,SAASG,OACRC,SAASC,SAGT9B,gBAAgByB,SAASM,QAAS,SAEzC,EACDC,KAAM,SAASC,IACXjC,gBAAgB,4BAA4BiC,KAAM,UAClDP,QAAQC,IAAIM,GAChB,IACD,GAEV,GACH,GACJ,CACL"}