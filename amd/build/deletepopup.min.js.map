{"version":3,"sources":["../src/deletepopup.js"],"names":["addNotification","msg","type","init","Array","from","document","getElementsByClassName","forEach","element","addEventListener","e","preventDefault","ticketId","dataset","Notification","confirm","methodname","args","id","done","response","console","log","status","location","reload","message","fail","ex"],"mappings":"wMACA,uD,GAIMA,CAAAA,CAAe,CAAG,SAACC,CAAD,CAAMC,CAAN,CAAe,CACnC,UAASD,CAAT,CAAc,CAACC,IAAI,CAAEA,CAAP,CAAd,CACH,C,QAEmB,QAAPC,CAAAA,IAAO,EAAM,CACtBC,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACC,sBAAT,CAAgC,eAAhC,CAAX,EAA6DC,OAA7D,CAAqE,SAAAC,CAAO,CAAI,CAC5EA,CAAO,CAACC,gBAAR,CAAyB,OAAzB,CAAkC,SAAAC,CAAC,CAAI,CACnCA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,CAAQ,CAAGJ,CAAO,CAACK,OAAR,CAAgBD,QAAjC,CACAE,UAAaC,OAAb,CACI,iBAAU,SAAV,CADJ,CAEI,iBAAU,uBAAV,CAAmC,eAAnC,CAFJ,CAGI,iBAAU,KAAV,CAHJ,CAII,iBAAU,IAAV,CAJJ,CAKI,UAAM,CACFL,CAAC,CAACC,cAAF,GACA,WAAS,CAAC,CACNK,UAAU,CAAE,6BADN,CAENC,IAAI,CAAE,CAACC,EAAE,CAAEN,CAAL,CAFA,CAGNO,IAAI,CAAE,cAASC,CAAT,CAAmB,CACrBC,OAAO,CAACC,GAAR,CAAYV,CAAZ,EACAS,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACA,GAAsB,GAAnB,EAAAA,CAAQ,CAACG,MAAZ,CAA0B,CACtBC,QAAQ,CAACC,MAAT,EACH,CAFD,IAGI,CACA1B,CAAe,CAACqB,CAAQ,CAACM,OAAV,CAAmB,QAAnB,CAClB,CACJ,CAZK,CAaNC,IAAI,CAAE,cAASC,CAAT,CAAa,CACf7B,CAAe,oCAA6B6B,CAA7B,EAAmC,QAAnC,CAAf,CACAP,OAAO,CAACC,GAAR,CAAYM,CAAZ,CACH,CAhBK,CAAD,CAAT,CAkBH,CAzBL,CA2BH,CA9BD,CA+BH,CAhCD,CAiCH,C","sourcesContent":["import {call as ajaxCall} from 'core/ajax';\r\nimport Notification from 'core/notification';\r\nimport {add as addToast} from 'core/toast';\r\nimport {get_string as getString} from 'core/str';\r\n\r\nconst addNotification = (msg, type) => {\r\n    addToast(msg, {type: type});\r\n};\r\n\r\nexport const init = () => {\r\n    Array.from(document.getElementsByClassName('delete-ticket')).forEach(element => {\r\n        element.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            const ticketId = element.dataset.ticketId;\r\n            Notification.confirm(\r\n                getString('confirm'),\r\n                getString('confirm_ticket_delete', 'local_tickets'),\r\n                getString('yes'), // Delete.\r\n                getString('no'), // Cancel.\r\n                () => {\r\n                    e.preventDefault();\r\n                    ajaxCall([{\r\n                        methodname: 'local_tickets_delete_ticket', \r\n                        args: {id: ticketId},\r\n                        done: function(response) {\r\n                            console.log(ticketId);\r\n                            console.log(response);\r\n                            if(response.status == 200){\r\n                                location.reload();\r\n                            }\r\n                            else{\r\n                                addNotification(response.message, 'danger');\r\n                            }\r\n                        },\r\n                        fail: function(ex) {\r\n                            addNotification(`Failed to delete ticket: ${ex}`, 'danger');\r\n                            console.log(ex);\r\n                        }\r\n                    }])\r\n                },\r\n            );  \r\n        });\r\n    });\r\n}\r\n"],"file":"deletepopup.min.js"}