{"version":3,"file":"modalforms.min.js","sources":["../src/modalforms.js"],"sourcesContent":["import ModalForm from 'core_form/modalform';\nimport {add as addToast} from 'core/toast';\nimport {call as ajaxCall} from 'core/ajax';\n\nconst addNotification = (msg, type) => {\n    addToast(msg, {type: type});\n    // eslint-disable-next-line no-console\n    console.log(msg);\n};\n\nexport const modalForm = (linkSelector, formClass, methodName, title, args = {hidebuttons: 1, ...args}) => {\n    document.querySelector(linkSelector).addEventListener('click', (e) => {\n        e.preventDefault();\n        const form = new ModalForm({\n            formClass,\n            args: args,\n            modalConfig: {title: title},\n            returnFocus: e.currentTarget\n        });\n        \n        form.addEventListener(form.events.FORM_SUBMITTED, (e) => {\n            const formData = JSON.stringify(e.detail);\n            ajaxCall([{\n                methodname: methodName, \n                args: {data: formData},\n                done: function(response) {\n                    const type = response?.status === 200 ? 'success' : 'danger';\n                    addNotification(response.message, type);\n                },\n                fail: function(ex) {\n                    console.log(ex);\n                    addNotification(`Failed to submit the form: ${ex.message}`, 'danger');\n                }\n            }]);\n\n        });\n\n        // Demo of different events.\n        form.addEventListener(form.events.ERROR, (e) => addNotification('Oopsie - ' + e.detail.message));\n        form.show();\n    });\n\n};"],"names":["obj","_modalform","__esModule","default","addNotification","msg","type","addToast","console","log","_exports","modalForm","linkSelector","formClass","methodName","title","args","arguments","length","undefined","hidebuttons","document","querySelector","addEventListener","e","preventDefault","form","ModalForm","modalConfig","returnFocus","currentTarget","events","FORM_SUBMITTED","formData","JSON","stringify","detail","ajaxCall","methodname","data","done","response","status","message","fail","ex","ERROR","show"],"mappings":"yIAA4C,IAAAA,sFAA5CC,YAA4CD,IAA5CC,aAA4CD,IAAAE,WAAAF,IAAAG,CAAAA,QAAAH,KAI5C,MAAMI,gBAAkBA,CAACC,IAAKC,SAC1B,EAAAC,OAAAA,KAASF,IAAK,CAACC,KAAMA,OAErBE,QAAQC,IAAIJ,IAAI,EAmClBK,SAAAC,UAhCuB,SAACC,aAAcC,UAAWC,WAAYC,OAA4C,IAArCC,KAAIC,UAAAC,OAAAD,QAAAE,IAAAF,UAAAE,GAAAF,UAAG,GAAA,CAACG,YAAa,KAAMJ,MAC7FK,SAASC,cAAcV,cAAcW,iBAAiB,SAAUC,IAC5DA,EAAEC,iBACF,MAAMC,KAAO,IAAIC,WAAAA,QAAU,CACvBd,oBACAG,KAAMA,KACNY,YAAa,CAACb,MAAOA,OACrBc,YAAaL,EAAEM,gBAGnBJ,KAAKH,iBAAiBG,KAAKK,OAAOC,gBAAiBR,IAC/C,MAAMS,SAAWC,KAAKC,UAAUX,EAAEY,SAClC,EAAAC,MAAAA,MAAS,CAAC,CACNC,WAAYxB,WACZE,KAAM,CAACuB,KAAMN,UACbO,KAAM,SAASC,UACX,MAAMnC,KAA4B,MAArBmC,UAAUC,OAAiB,UAAY,SACpDtC,gBAAgBqC,SAASE,QAASrC,KACrC,EACDsC,KAAM,SAASC,IACXrC,QAAQC,IAAIoC,IACZzC,gBAAiB,8BAA6ByC,GAAGF,UAAW,SAChE,IACD,IAKPjB,KAAKH,iBAAiBG,KAAKK,OAAOe,OAAQtB,GAAMpB,gBAAgB,YAAcoB,EAAEY,OAAOO,WACvFjB,KAAKqB,MAAM,IAGjB"}