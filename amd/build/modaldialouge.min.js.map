{"version":3,"sources":["../src/modaldialouge.js"],"names":["addNotification","msg","type","init","linkSelector","document","querySelector","addEventListener","e","preventDefault","methodname","args","done","response","status","tickets","JSON","parse","data","ModalFactory","create","large","title","body","Templates","render","modal","show","message","fail","ex","console","log"],"mappings":"8NAAA,OAEA,O,qXAIMA,CAAAA,CAAe,CAAG,SAACC,CAAD,CAAMC,CAAN,CAAe,CACnC,UAASD,CAAT,CAAc,CAACC,IAAI,CAAEA,CAAP,CAAd,CACH,C,QAEmB,QAAPC,CAAAA,IAAO,CAACC,CAAD,CAAkB,CAClCC,QAAQ,CAACC,aAAT,CAAuBF,CAAvB,EAAqCG,gBAArC,CAAsD,OAAtD,CAA+D,SAACC,CAAD,CAAO,CAClEA,CAAC,CAACC,cAAF,GACA,WAAS,CAAC,CACNC,UAAU,CAAE,2BADN,CAENC,IAAI,CAAE,EAFA,CAGNC,IAAI,4CAAE,WAAeC,CAAf,gGACoB,GAAnB,EAAAA,CAAQ,CAACC,MADV,kBAEQC,CAFR,CAEkBC,IAAI,CAACC,KAAL,CAAWJ,CAAQ,CAACK,IAApB,CAFlB,gBAGsBC,WAAaC,MAAb,CAAoB,CACpCC,KAAK,GAD+B,CAEpCC,KAAK,CAAE,iBAAU,gBAAV,CAA4B,eAA5B,CAF6B,CAGpCC,IAAI,CAAEC,UAAUC,MAAV,CAAiB,6BAAjB,CAAgD,CAACV,OAAO,CAAEA,CAAV,CAAhD,CAH8B,CAApB,CAHtB,QAGQW,CAHR,QAQEA,CAAK,CAACC,IAAN,GARF,sBAWE3B,CAAe,CAACa,CAAQ,CAACe,OAAV,CAAmB,QAAnB,CAAf,CAXF,wCAAF,4DAHE,CAiBNC,IAAI,CAAE,cAASC,CAAT,CAAa,CACf9B,CAAe,mCAA4B8B,CAA5B,EAAkC,QAAlC,CAAf,CACAC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CACH,CApBK,CAAD,CAAT,CAsBH,CAxBD,CAyBH,C","sourcesContent":["import ModalFactory from 'core/modal_factory';\r\nimport {call as ajaxCall} from 'core/ajax';\r\nimport Templates from 'core/templates';\r\nimport {add as addToast} from 'core/toast';\r\nimport {get_string as getString} from 'core/str';\r\n\r\nconst addNotification = (msg, type) => {\r\n    addToast(msg, {type: type});\r\n};\r\n\r\nexport const init = (linkSelector) => {\r\n    document.querySelector(linkSelector).addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        ajaxCall([{\r\n            methodname: 'local_tickets_get_tickets', \r\n            args: {},\r\n            done: async function(response) {\r\n                if(response.status == 200){\r\n                    const tickets = JSON.parse(response.data);\r\n                    const modal = await ModalFactory.create({\r\n                        large: true,\r\n                        title: getString('manage_tickets', 'local_tickets'),\r\n                        body: Templates.render('local_tickets/modaldialouge', {tickets: tickets}),\r\n                    });\r\n                    modal.show();\r\n                }\r\n                else{\r\n                    addNotification(response.message, 'danger');\r\n                }\r\n            },\r\n            fail: function(ex) {\r\n                addNotification(`Failed to fetch ticket: ${ex}`, 'danger');\r\n                console.log(ex);\r\n            }\r\n        }])\r\n    });\r\n};"],"file":"modaldialouge.min.js"}