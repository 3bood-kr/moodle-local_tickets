define("local_tickets/modaldialouge",["exports","core/modal_factory","core/modal_events","core/ajax","core/templates","core/fragment","core/toast","core/str"],(function(_exports,_modal_factory,_modal_events,_ajax,_templates,_fragment,_toast,_str){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_fragment=_interopRequireDefault(_fragment);_exports.init=(linkSelector,title)=>{document.querySelector(linkSelector).addEventListener("click",(e=>{e.preventDefault(),async function(title){let modal;async function showModal(){modal=await _modal_factory.default.create({large:!0,title:title,body:await _fragment.default.loadFragment("local_tickets","rerender_modal_dialouge",M.cfg.contextid,{page:0})}),console.log(await _fragment.default.loadFragment("local_tickets","rerender_modal_dialouge",M.cfg.contextid,{page:0})),require(["local_tickets/deletepopup"],(function(deletepopup){deletepopup.init()})),modal.getRoot().on(_modal_events.default.hidden,(function(){modal.destroy()})),modal.show()}async function handlePaginationLinkClick(event,pageNum){event.preventDefault(),modal&&(await _fragment.default.loadFragment("local_tickets","rerender_modal_dialouge",M.cfg.contextid,{page:pageNum-1}).then(((html,js)=>{modal.setBody(html),require(["local_tickets/deletepopup"],(function(deletepopup){deletepopup.init()}))})),attachPaginationListeners())}async function attachPaginationListeners(){document.querySelectorAll(".modal-body .page-link").forEach((function(link){link.removeEventListener("click",handlePaginationLinkClick),link.addEventListener("click",(event=>handlePaginationLinkClick(event,link.parentElement.getAttribute("data-page-number"))))}))}await showModal(),attachPaginationListeners()}(title)}))}}));

//# sourceMappingURL=modaldialouge.min.js.map